<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Gridlock — Keep Talking and Nobody Explodes Mod</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script src="js/Utilities/svg-utils.js"></script>
    <script>
    $(function() {
        const rotation = { N: 0, NE: 45, E: 90, SE: 135, S: 180, SW: 225, W: 270, NW: 315 };
        const direction = (
            "SW NE S E "+
            "SW N W NW "+
            "N NW S W "+
            "NE SE SE E "+

            "W SW N NW "+
            "N S NW W "+
            "SE E NE SE "+
            "E S NE SW "+

            "E S NE SW "+
            "W SW N NW "+
            "N S NW W "+
            "SE E NE SE "+

            "W N S NW "+
            "SE SE E NE "+
            "SW E S NE "+
            "NW W SW N "+

            "N NW W SW "+
            "NW W N S "+
            "NE SE SE E "+
            "NE SW E S"
        ).split(" ");
        let cells = $("table.gridlock-1 tr:nth-child(n+2) th");
        cells.each(function(i, e) {
            let svg = MakeSvgTag(100,100,0,0, { class:"arrow" });
            let arrow = MakeArrow(rotation[ direction[i] ], 100,50,50, "thin-v", "thin");
            svg.append(arrow);
            $(this).append(svg);
        });
    });
    </script>
    <style>
        li { margin: .3em 0; }
        .dark table, table { border: none; }

        table.gridlock-1 {
            margin: 1em auto;
            font-size: 18pt;
        }
            table.gridlock-1 td, table.gridlock-1 th {
                text-align: center;
                line-height: 1;
            }
            table.gridlock-1 tr:nth-child(n+2) th {
                padding: 6px 3px 0;
            }
        table.gridlock-2 {
            margin: 1.5em auto;
        }
        svg.arrow { height: 30px; }
        .dark svg .arrow-hs { fill: #DDD; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Gridlock</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Gridlock.svg" class="diagram">
                <h2>On the Subject of Gridlock</h2>
                <p class="flavour-text">Even a traffic jam isn’t this stop and go.</p>

                <ul>
                    <li>A 4×4 grid is shown, with squares marked with colors
                    and/or shapes.</li>
                    <li>The starting position is the square marked with a star.</li>
                    <li>Using the first table on the next page, find the direction indicated by the
                    star and the color of that square.</li>
                    <li>The next position is the
                    square 1 space in the direction indicated by the table lookup.</li>
                    <li>Press the <em>NEXT</em> button. This will change the information
                    displayed on the module.</li>
                    <li>Continue finding positions using the following rules:
                    <ul>
                        <li>If the current square on the module has an arrow, move in the
                        direction indicated by the arrow.</li>
                        <li>If the current square is colored, use the first table to look
                        up the direction to move based on the symbol and color in the
                        square, and press the <em>NEXT</em> button.</li>
                        <li>If the current square on the module is blank, find the
                        table marked with the same color as the last colored
                        square used, and move in the direction indicated based on the
                        current position.</li>
                    </ul></li>
                    <li>If at any point, a movement would result in landing on a
                    previously occupied position, continue in the same direction
                    until you land on an as-yet unused position.</li>
                    <li>The grid loops around, such that an upward movement from the top
                    row will move to the bottom row of the same column, and likewise
                    for left/right movement off the grid, or diagonal movement off
                    the grid (for example, moving north-east from A1 leads to B4.)</li>
                    <li>At some point, an instruction will result in a gridlock, where
                    all possible positions valid to move to have already been used.</li>
                    <li>The square that gave that movement is the solution. Hitting that
                    square on the grid will disarm the module.</li>
                    <li>Hitting any other square in the grid will result in a strike
                    and the module returning to its initial state.</li>
                    <li>The page number in the bottom-right of the module displays which
                    set of symbols the module is currently showing. In some cases it
                    may be necessary to loop back to the first page while solving the module.</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">Page 1 of 2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Gridlock</span>
            </div>
            <div class="page-content">

                <table class='gridlock-1'>
                    <tr><th>Movement</th><th>Blue</th><th>Green</th><th>Yellow</th><th>Red</th></tr>
                    <tr><td>△</td><th></th><th></th><th></th><th></th></tr>
                    <tr><td>◇</td><th></th><th></th><th></th><th></th></tr>
                    <tr><td>⎔</td><th></th><th></th><th></th><th></th></tr>
                    <tr><td>☆</td><th></th><th></th><th></th><th></th></tr>
                </table>

                <table class='gridlock-2'>
                    <tr>
                        <td class="corner">
                            <table class='gridlock-1'>
                            <tr><th>BLUE</th><th>A</th><th>B</th><th>C</th><th>D</th></tr>
                            <tr><td>1</td><th></th><th></th><th></th><th></th></tr>
                            <tr><td>2</td><th></th><th></th><th></th><th></th></tr>
                            <tr><td>3</td><th></th><th></th><th></th><th></th></tr>
                            <tr><td>4</td><th></th><th></th><th></th><th></th></tr>
                            </table>
                        </td><td class="corner">
                            <table class='gridlock-1'>
                            <tr><th>GREEN</th><th>A</th><th>B</th><th>C</th><th>D</th></tr>
                            <tr><td>1</td><th></th><th></th><th></th><th></th></tr>
                            <tr><td>2</td><th></th><th></th><th></th><th></th></tr>
                            <tr><td>3</td><th></th><th></th><th></th><th></th></tr>
                            <tr><td>4</td><th></th><th></th><th></th><th></th></tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="corner">
                            <table class='gridlock-1'>
                            <tr><th>YELLOW</th><th>A</th><th>B</th><th>C</th><th>D</th></tr>
                            <tr><td>1</td><th></th><th></th><th></th><th></th></tr>
                            <tr><td>2</td><th></th><th></th><th></th><th></th></tr>
                            <tr><td>3</td><th></th><th></th><th></th><th></th></tr>
                            <tr><td>4</td><th></th><th></th><th></th><th></th></tr>
                            </table>
                        </td><td class="corner">
                            <table class='gridlock-1'>
                            <tr><th>RED</th><th>A</th><th>B</th><th>C</th><th>D</th></tr>
                            <tr><td>1</td><th></th><th></th><th></th><th></th></tr>
                            <tr><td>2</td><th></th><th></th><th></th><th></th></tr>
                            <tr><td>3</td><th></th><th></th><th></th><th></th></tr>
                            <tr><td>4</td><th></th><th></th><th></th><th></th></tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 2 of 2</div>
        </div>
    </div>
</body>
</html>
